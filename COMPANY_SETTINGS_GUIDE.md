# Company Settings Guide

## Overview
Company settings allow you to customize your Quality Management System with your organization's branding and contact information. This information will appear on all PDF reports generated by the system.

## Accessing Company Settings

### Prerequisites
- You must be logged in as an **Administrator** to access company settings
- Navigate to: **Tools > Company Settings** (menu bar)

## Configuration Options

### Company Logo
- **Upload Logo**: Click to select an image file (PNG, JPG, JPEG, BMP, GIF)
- **Logo Preview**: See a preview of your logo before saving
- **Remove Logo**: Clear the current logo
- **Recommended Size**: 150x150 pixels or similar aspect ratio
- **Note**: The logo will appear in PDF report headers

### Company Information
- **Company Name*** (Required): Your organization's official name
- **Registration Number**: Business registration/incorporation number
- **Tax ID**: Tax identification number

### Contact Information
- **Address**: Street address
- **City**: City name
- **State/Province**: State or province
- **Postal Code**: ZIP or postal code
- **Country**: Country name
- **Phone**: Main phone number
- **Fax**: Fax number (if applicable)
- **Email**: General contact email
- **Website**: Company website URL

### Additional Information
- **Certifications**: Quality certifications (ISO, etc.)

## PDF Integration

When company settings are configured, PDF reports will automatically include:

### Header
- **Company Logo**: Displayed on the left side
- **Company Name**: In bold blue text
- **"Quality Management System"**: Subtitle below company name

### Footer
- **Generation Date**: When the PDF was created
- **Contact Information**: Phone, email, and website (if provided)
- **Page Numbers**: Current page number

## Data Storage

- Company settings are stored in the `company_settings` database table
- Only one set of company settings can exist (singleton pattern)
- Logo images are stored as binary data in the database
- Settings are automatically loaded when generating PDFs

## Security

- Only administrators can view and edit company settings
- All changes are logged with user ID and timestamp
- The `updated_by_id` field tracks who made the last change

## Usage Tips

1. **Logo Quality**: Use a high-resolution logo for best results in PDFs
2. **Transparent Backgrounds**: PNG files with transparency work best
3. **Contact Info**: Include only relevant contact details
4. **Certifications**: List all relevant quality certifications
5. **Regular Updates**: Keep contact information current

## Troubleshooting

### Logo Not Appearing in PDFs
- Verify the logo was uploaded successfully (check preview)
- Ensure the logo file is not corrupted
- Try a different image format (PNG recommended)
- Check that the logo file size is reasonable (< 5 MB)

### Settings Not Saving
- Ensure company name is filled (required field)
- Check that you have administrator permissions
- Verify database write permissions
- Check application logs for errors

### PDF Header Issues
- Regenerate the PDF after updating settings
- Clear any temporary files
- Restart the application if necessary

## Database Migration

If upgrading from a previous version, the `company_settings` table will be created automatically on first run. No manual intervention required.

For manual database updates, see `migrations/002_add_company_settings.sql`

## Example Configuration

```
Company Name: ABC Manufacturing Ltd.
Registration Number: 12345678
Tax ID: 98-7654321
Address: 123 Industrial Drive
City: Springfield
Country: United States
Phone: (555) 123-4567
Email: quality@abcmfg.com
Website: www.abcmanufacturing.com
Certifications: ISO 9001:2015, ISO 14001:2015
```

## API Reference

### Database Model
```python
class CompanySettings(Base):
    __tablename__ = 'company_settings'
    
    id = Column(Integer, primary_key=True)
    company_name = Column(String(255), nullable=False)
    company_logo = Column(LargeBinary)
    logo_filename = Column(String(255))
    # ... additional fields
```

### Usage in Code
```python
# Get company settings
settings = session.query(CompanySettings).first()

# Create PDF with branding
pdf_gen = PDFGenerator(session)
pdf_gen.generate_record_pdf(record, filepath)
```

## Support

For issues or questions about company settings:
1. Check this documentation
2. Review application logs
3. Contact system administrator
4. Check database connectivity
